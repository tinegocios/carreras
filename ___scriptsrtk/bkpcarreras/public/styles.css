html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }

#layout { position: absolute; top: 0; bottom: 0; left: 0; right: 0; display: flex; }
#map { position: relative; flex: 0 0 75%; height: 100%; }
#sidebar { flex: 1; display: flex; flex-direction: column; border-left: 1px solid #e5e5e5; background: #fafafa; }
#leaderboard, #chartPanel { padding: 8px 10px; overflow: auto; }
#leaderboard { height: 50%; border-bottom: 1px solid #e5e5e5; }
#leaderboard h3, #chartPanel h3 { margin: 6px 0; font-size: 14px; }
#boardList { margin: 0; padding: 0 6px; font-size: 13px; list-style: none; }
#boardList li { margin: 6px 0; transition: transform 250ms ease, background-color 350ms ease; }
#boardList li.overtake { background-color: #e6ffed; }
#boardList .competitor-card { display: grid; grid-template-columns: 18px 1fr; gap: 8px; padding: 8px; background: #fff; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.12); border-left: 4px solid #ccc; box-sizing: border-box; width: 100%; }
#boardList .color-dot { width: 12px; height: 12px; border-radius: 50%; margin-top: 2px; }
#boardList .color-dot.blink { animation: color-dot-blink 0.6s ease; }
@keyframes color-dot-blink {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.5); opacity: 0.2; }
}
#boardList .row { display: flex; gap: 8px; align-items: center; justify-content: flex-start; }
#boardList .rank-num { font-weight: 700; }
#boardList .line { display: grid; grid-template-columns: 20% 20% 35% 25%; align-items: center; gap: 6px; width: 100%; }
#boardList .line .col1 { display: inline-flex; gap: 6px; align-items: center; min-width: 0; }
#boardList .line .col2, #boardList .line .col3, #boardList .line .col4 { display: grid; grid-template-columns: 16px 1fr; align-items: center; gap: 6px; color: #444; font-size: 12px; min-width: 0; }
#boardList .line .col2 .val, #boardList .line .col3 .val, #boardList .line .col4 .val { text-align: right; font-variant-numeric: tabular-nums; }
#boardList li { overflow: hidden; }
#boardList .meta { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 4px 10px; font-size: 12px; color: #444; }
#boardList .meta span { display: flex; gap: 6px; align-items: center; }

#chartPanel { height: 50%; }
canvas#speedChart { width: 100%; height: 100%; }

/* Floating map buttons */
#mapButtons { position: absolute; top: 12px; right: 12px; display: flex; flex-direction: column; gap: 8px; z-index: 1000; }
#mapButtons button { width: 40px; height: 40px; border-radius: 50%; border: none; box-shadow: 0 2px 6px rgba(0,0,0,0.2); background: #fff; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center; }
#mapButtons button:hover { background: #f3f3f3; }

/* Modal */
.modal { position: fixed; inset: 0; background: rgba(0,0,0,0.35); display: flex; align-items: center; justify-content: center; z-index: 2000; }
.modal.hidden { display: none; }
.modal .modal-content { width: min(720px, 92vw); max-height: 90vh; overflow: auto; background: #fff; border-radius: 10px; box-shadow: 0 10px 24px rgba(0,0,0,0.25); padding: 16px; }
.modal h2 { margin: 0 0 12px 0; }
.form-grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 10px 16px; }
.form-grid label { display: grid; gap: 4px; font-size: 14px; }
.form-grid input[type="number"], .form-grid input[type="file"], .form-grid input[type="text"], .form-grid input[type="checkbox"] { font-size: 14px; padding: 6px; }
.modal-actions { display: flex; gap: 8px; margin-top: 12px; align-items: center; }
.modal-actions .spacer { flex: 1; }
.modal-actions button { padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; }
.modal-actions button.primary { background: #0d6efd; color: #fff; }
.modal-actions button.secondary { background: #e9ecef; }
.modal .hint { font-size: 12px; color: #666; margin-top: 8px; }

/* Runner marker with text inside */
.runner { width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 700; font-size: 12px; border: 2px solid #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.25); }
